<div class="task-container">
  <p-panel
    *ngFor="let task of tasks"
    [toggleable]="true"
    [collapsed]="true"
    [ngClass]="{
      completed: task.completed,
      overdue: isOverdue(task)
    }"
    class="task-panel modern-shadow border-round surface-card"
    [header]="''"
  >
    <ng-template pTemplate="header">
      <div class="flex  justify-between items-center w-full">
        <div class="text-lg mr-2 font-medium">
          {{ task.title }}
        </div>
        <div class="text-sm text-gray-500 text-right">
          Due: {{ task.duedate | date : "mediumDate" }}
        </div>
      </div>
    </ng-template>

    <div class="task-body text-sm text-gray-700">
      <div class="flex items-center gap mb-2">
        <p-tag
          [severity]="
            task.completed ? 'success' : isOverdue(task) ? 'danger' : 'warning'
          "
          [value]="
            task.completed
              ? 'Completed'
              : isOverdue(task)
              ? 'Overdue'
              : 'Pending'
          "
        ></p-tag>
      </div>

      <div class="mb-3">
        <p class="mb-1 font-semibold">Description</p>
        <p>{{ task.description || "No description." }}</p>
      </div>

      <div class="task-actions flex gap-2 mt-3">
        <button
          pButton
          icon="pi pi-check"
          class="p-button-sm p-button-success p-button-outlined"
          (click)="markComplete(task)"
          [disabled]="task.completed"
        ></button>
        <button
          pButton
          icon="pi pi-pencil"
          class="p-button-sm p-button-warning p-button-outlined"
          (click)="editTask(task)"
        ></button>
        <button
          pButton
          icon="pi pi-trash"
          class="p-button-sm p-button-danger p-button-outlined"
          (click)="deleteTask(task)"
        ></button>
      </div>
    </div>
  </p-panel>
</div>
